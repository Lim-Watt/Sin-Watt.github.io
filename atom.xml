<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>正弦慢卷</title>
  
  <subtitle>来杯竹叶清。 | 请坐。</subtitle>
  <link href="http://sine-tea.com/atom.xml" rel="self"/>
  
  <link href="http://sine-tea.com/"/>
  <updated>2025-03-10T08:12:08.556Z</updated>
  <id>http://sine-tea.com/</id>
  
  <author>
    <name>渊明</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>联合省选-2025-邮寄</title>
    <link href="http://sine-tea.com/article/70d56e74.html"/>
    <id>http://sine-tea.com/article/70d56e74.html</id>
    <published>2025-03-06T13:20:02.000Z</published>
    <updated>2025-03-10T08:12:08.556Z</updated>
    
    <content type="html"><![CDATA[<h2 id="经过"><a class="markdownIt-Anchor" href="#经过"></a> 经过</h2><h3 id="day0-晚上"><a class="markdownIt-Anchor" href="#day0-晚上"></a> Day0 晚上</h3><p>在酒店自习。很认真的在自习，但不知道自习了个什么。</p><p>自习完，在房间里剥瓜子，可怜的 @Dovish 没睡着。</p><h3 id="day1-上午"><a class="markdownIt-Anchor" href="#day1-上午"></a> Day1 上午</h3><p>一眼猜了个结论，二分，排序，通过 T1（的大样例），然而只过了不到半个小时。</p><p>看 T2、T3，会不了一点。吃瓜子（是瓜子仁，昨天剥的）。</p><p>写了 T2 的 20 分暴力，写 T3 的 8 分暴力。</p><p>根据模拟赛的经验，T3 的可做部分分一般会更多，于是想 C 性质，发现可行，先写了 AC 性质，然后改成 C 性质。</p><p>T3 足够了，回来想 T2。偶遇 bitset 乱写铸就满正确性 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><msup><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2\log^2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.148448em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984479999999999em;"><span style="top:-3.1473400000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 不如暴力做法。（为什么不写部分分？为什么写正解不考虑复杂度？）</p><h3 id="day1-下午"><a class="markdownIt-Anchor" href="#day1-下午"></a> Day1 下午</h3><p>吃，打雀，剥瓜子。</p><h3 id="day1-晚上"><a class="markdownIt-Anchor" href="#day1-晚上"></a> Day1 晚上</h3><p>在酒店自习。完全不想自习。</p><h3 id="day2-上午"><a class="markdownIt-Anchor" href="#day2-上午"></a> Day2 上午</h3><p>一眼猜了个结论，二分，线段树，通过 T1（的大样例），然而已经过了一个半小时。</p><p>觉得 T2、T3 非常顺眼，但就是会不了一点。吃瓜子（是瓜子仁，昨天剥的）。</p><p>写了 T2 的 12 分暴力，写 T3 的 8 分暴力。</p><p>T3 的 8 分暴力过不了样例，悲。</p><p>写 T2 的 sub2，过不了，悲。</p><h3 id="day2-下午"><a class="markdownIt-Anchor" href="#day2-下午"></a> Day2 下午</h3><p>坐车返回。</p><p>集体去吃满江红。但是原先那家满江红垮了……</p><p>看到数字化管理的屏幕，空闲的包间就是绿的，那时大概四点半左右，都是绿的。但是我们来了，于是就有个框红了……</p><h3 id="day3"><a class="markdownIt-Anchor" href="#day3"></a> Day3</h3><p>悲催一早去补文化课。</p><h3 id="day6"><a class="markdownIt-Anchor" href="#day6"></a> Day6</h3><p>出成绩。</p><p>Day1 还好，T1、T3 没爆，T2 后面那坨没爆空间。</p><p>Day2 炸了。T1 只有 40。。看样子是线段树哪儿没对。好吧，我再也不相信 ccf 的数据和大样例了。</p><p><img src="https://cdn.luogu.com.cn/upload/image_hosting/bg7hd5ek.png" alt="" /></p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ol><li>永远不要把自己的命运放在 ccf 手里。</li><li>写 T1，要检查，要对拍。</li><li>DS 写少了导致的。</li><li>DP 写少了导致的。</li><li>不会容斥导致的。</li><li>不写暴力导致的。</li><li>码力低下导致的。</li><li>不学科技导致的。</li></ol><p>事实证明，在考场吃瓜子仁并不能达到和嗑瓜子一样的防困的效果，所以以后还是不要剥瓜子折磨自己了。</p><p>所以，下次能不晚自习吗……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;经过&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#经过&quot;&gt;&lt;/a&gt; 经过&lt;/h2&gt;
&lt;h3 id=&quot;day0-晚上&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#day0-晚上&quot;&gt;&lt;/a&gt; Day0 晚上&lt;</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="游记" scheme="http://sine-tea.com/categories/OI/%E6%B8%B8%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>NOIP2024</title>
    <link href="http://sine-tea.com/article/49bfeb37.html"/>
    <id>http://sine-tea.com/article/49bfeb37.html</id>
    <published>2024-12-01T07:29:03.000Z</published>
    <updated>2025-03-10T08:04:37.554Z</updated>
    
    <content type="html"><![CDATA[<p>简单总结一下。</p><p>难度感觉：还好。比昨年简单。</p><p>最大失误：没写 T4 暴力。</p><p>失误原因：分配给 T4 的时间少了。</p><h2 id="那时间都去哪儿了"><a class="markdownIt-Anchor" href="#那时间都去哪儿了"></a> 那时间都去哪儿了？</h2><h3 id="t1"><a class="markdownIt-Anchor" href="#t1"></a> T1</h3><p>总用时 1h。期望 100。</p><p>虽然比较顺利，但速度还是慢了</p><p>改改调调、贪心思路完善了 3 次才过大样例。</p><p>这种难度在贪心思路和结论的题，搞人心态、浪费时间、容易fst。</p><p>需要多加 cf、at 比赛的练习。以后 abc 也要打了，不能犯懒了，这种题要最多 20 分钟要过掉。</p><h3 id="t2"><a class="markdownIt-Anchor" href="#t2"></a> T2</h3><p>总用时 1h。期望 100</p><p>看错题了，对着一个难度超过黑的东西比划了半个小时……</p><del>还好，这次只花半个小时就反应过来了</del><p>以后读题还是要读两遍</p><h3 id="t3"><a class="markdownIt-Anchor" href="#t3"></a> T3</h3><p>总用时 2h。</p><p>题目定位是带有浓浓结论气息的构造答案型的计数题。属于我擅长的类型。看到后比较兴奋，以为前 40 有望。<del>（这是事实</del>。</p><p>前一个小时的熟悉感觉、推关键部分分和对应的结论、完善正解思路，码出代码。</p><p>肯定会有哪儿打错或遗漏，然后测第三个大样例的时候爆栈了。然后尝试开大栈空间，无果。虚空调试代码。（至少半个小时）</p><p>当时很崩溃，抽出来看 T4，看了 10 多分钟没看出做法，又回来调 T3，后发现第四个样例数据还小一些，开始调。最后似乎是没调出来。</p><p>差一点就写出来哩。</p><p>一个紫，如果是向着正解去的话，2h 的用时应该差不多。但考虑到是自己擅长的，这题其实应该 1.5h 就够了。毕竟中途发了半个多小时的疯。</p><p>其实这题的主要问题不是时间，而是精准度不够。不是 ds 题，就不应该存在调代码的环节。</p><h3 id="t4"><a class="markdownIt-Anchor" href="#t4"></a> T4</h3><p>其实就算前面抽出 1.5h，暴力 64 我应该也拿不满。<del>毕竟自己的 ds 水平自己心里有数。</del></p><p>倒是 10 多分钟连暴力都看不出来就有些丢人了，大概是最近部分分写少了的问题。（没错，就是懒的问题，就应该拎出去多跑两圈）</p><p>过去的都过去啦，接下来该一边填OI中之前挖的坑，一边死心补文化课了。</p><del>呜呜呜，我的364啊，我的前40啊，我的停课啊……</del>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;简单总结一下。&lt;/p&gt;
&lt;p&gt;难度感觉：还好。比昨年简单。&lt;/p&gt;
&lt;p&gt;最大失误：没写 T4 暴力。&lt;/p&gt;
&lt;p&gt;失误原因：分配给 T4 的时间少了。&lt;/p&gt;
&lt;h2 id=&quot;那时间都去哪儿了&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#那</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="游记" scheme="http://sine-tea.com/categories/OI/%E6%B8%B8%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>字符串上dp</title>
    <link href="http://sine-tea.com/article/c7bb6bf2.html"/>
    <id>http://sine-tea.com/article/c7bb6bf2.html</id>
    <published>2024-10-30T13:22:36.000Z</published>
    <updated>2025-03-10T08:04:37.558Z</updated>
    
    <content type="html"><![CDATA[<div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="https://www.cnblogs.com/hkttg/p/10162391.html" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">https://www.cnblogs.com/hkttg/p/10162391.html</span><span class="cap link footnote">https://www.cnblogs.com/hkttg/p/10162391.html</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="https://blog.csdn.net/qq_51282224/article/details/122783438" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">https://blog.csdn.net/qq_51282224/article/details/122783438</span><span class="cap link footnote">https://blog.csdn.net/qq_51282224/article/details/122783438</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="https://www.luogu.com.cn/training/638485" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">https://www.luogu.com.cn/training/638485</span><span class="cap link footnote">https://www.luogu.com.cn/training/638485</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="回文"><a class="markdownIt-Anchor" href="#回文"></a> 回文</h2><ul><li><p>小区间更新大区间</p></li><li><p>因为原串和反串的 LCS（最长公共子序列），就等同于在原串中有 LCS 个字符是对应相等的。回文差异就是那些对应不相等的位置。</p><p>于是一个回文问题就变成子序列问题 神奇</p></li></ul><h2 id="uva1630-串折叠-folding"><a class="markdownIt-Anchor" href="#uva1630-串折叠-folding"></a> UVA1630 串折叠 Folding</h2><p>sb UVA</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;tag-plugin link dis-select&quot;&gt;&lt;a class=&quot;link-card plain&quot; title=&quot;&quot; href=&quot;https://www.cnblogs.com/hkttg/p/10162391.html&quot; target=&quot;_bl</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="专项总结" scheme="http://sine-tea.com/categories/OI/%E4%B8%93%E9%A1%B9%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>CSP-S-2024</title>
    <link href="http://sine-tea.com/article/2752e66e.html"/>
    <id>http://sine-tea.com/article/2752e66e.html</id>
    <published>2024-10-28T07:09:56.000Z</published>
    <updated>2025-03-10T08:04:37.553Z</updated>
    
    <content type="html"><![CDATA[<p>100 + 100 + 0 + 0</p><p>开考一个小时多没看题，在捣鼓虚拟机、还原 NOI LINUX 配置、背诵缺省源。</p><p>之前老师让研究 VirtualBox 的时候我没管，于是吃了点亏，多花了一点时间。</p><p>默写缺省源的时候写了一些很复杂的东西（之前习惯用自己写的输入输出、以后考虑使用 cin、cout。</p><p>然后第一题签，应该没问题。</p><p>第二题稍微多抠了一点细节，没什么大问题。</p><p>第三题开写的时候比赛还有一个半小时，当时想起了一道加强版的题（那题是网络流），于是想复杂了，花了半个小时才想出做法，半个小时写出代码，但不知道哪儿有点问题，最后半个小时又不敢一直调题，于是就没调出来。</p><p>当时觉得 T3 调的出来、T4 暴力不好写于是就没写，有点吃亏。</p><p>简单总结就是准备不够充分。心态和发挥没什么问题。</p><p>所以</p><ol><li>VirtualBox 要重新看一遍。自己还是要装一个。考场发现那个虚拟机有三个问题待解决：<ul><li>VirtualBox 剪贴板不同步。              ( (顶栏 -&gt; 设备) / (设置 -&gt; 常规 -&gt; 高级) -&gt; 共享剪贴板 -&gt; 双向)</li><li>VirtualBox 占用了 <kbd>右Ctrl</kbd>。  (  顶栏 -&gt; 热键 -&gt; 虚拟电脑 -&gt; 主机组合键 )</li><li>他那个虚拟机 <code>sudo</code> 命令用不了。        ( sb某学校  )</li></ul></li><li>简化缺省源，没必要的东西就不要写了。我想快读快写应该还是用不到的。</li><li>把 T3 补了。虽然是简单唐氏题，但是一定要调出来，不然晚上睡不好。</li></ol><br><table>  <thead>    <tr>      <th colspan="3" style = "font-size: 20px">       11 月计划      </th>    </tr>    <tr>      <th>时间</th>      <th>安排</th>      <th>方案</th>    </tr>  </thead>  <tbody>    <tr>      <td>-1 ～ 5</td>      <td>字符串上dp</td>      <td>绿到紫带 “字符串” 和 “dp” 标签的题</td>    </tr>    <tr>      <td>6 ～ 12</td>      <td>背包</td>      <td>绿到紫带 “背包” 标签的题</td>    </tr>    <tr>      <td rowspan="2">13 ～ 19</td>      <td rowspan="2">概率DP</td>      <td>        <a href="https://www.luogu.com.cn/training/4922" data-href="https://www.luogu.com.cn/training/4922">          https://www.luogu.com.cn/training/4922        </a>      </td>    </tr>    <tr>      <td>        <a href="https://www.luogu.com.cn/training/386704" data-href="https://www.luogu.com.cn/training/386704">          https://www.luogu.com.cn/training/386704        </a>      </td>    </tr>    <tr>      <td>20 ～ 26</td>      <td>大ds</td>      <td>        <a href="https://www.luogu.com.cn/discuss/981257" data-href="https://www.luogu.com.cn/discuss/981257">          正在求题        </a>    </tr>    <tr>      <td>27 ～ 29</td>      <td colspan="2">随机补漏</td>    </tr>  </tbody></table><style>  th {    text-align:center  }  td {    text-align:center  }</style>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;100 + 100 + 0 + 0&lt;/p&gt;
&lt;p&gt;开考一个小时多没看题，在捣鼓虚拟机、还原 NOI LINUX 配置、背诵缺省源。&lt;/p&gt;
&lt;p&gt;之前老师让研究 VirtualBox 的时候我没管，于是吃了点亏，多花了一点时间。&lt;/p&gt;
&lt;p&gt;默写缺省源的时候写了一些很复杂</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="游记" scheme="http://sine-tea.com/categories/OI/%E6%B8%B8%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>题解 [省选联考 2020 B 卷] 消息传递</title>
    <link href="http://sine-tea.com/article/4cd9b5e7.html"/>
    <id>http://sine-tea.com/article/4cd9b5e7.html</id>
    <published>2024-10-07T09:49:49.000Z</published>
    <updated>2025-03-10T08:04:37.559Z</updated>
    
    <content type="html"><![CDATA[<p><strong>省流：</strong></p><del>长剖做法，全网首发，最优拿下，把某点分治吊杀。</del> <p>实际上卡满的话没有点分治快。</p><hr /><p>长链剖分属于树链剖分的一种。不过重儿子是<strong>子树深度</strong>最大的那个儿子（称为长儿子）。</p><p>长剖性质有：</p><ul><li>长链的长度之和为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。</li><li>对于树上的任何一个点跳长链到根，需要经过不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.05028em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 条长链。长链的长度依次为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">1,2,3,\cdots,\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span> 时卡满。</li></ul><p>由于第二条性质，使得长剖的发挥空间比重剖小。不过由于长剖独特的定义，使得其可以在与距离相关的部分问题中，给出线性且低常数神奇做法。比如长剖优化DP。</p><hr /><p>我们用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">son[u]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span></span></span></span> 表示非叶子节点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 的长儿子。</p><p>定义 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f[u][i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 为以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 为根的子树中，与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 距离为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 的点的个数。我们每个节点的状态直接继承其长儿子的节点状态（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>←</mo><mi>f</mi><mo stretchy="false">[</mo><mi>s</mi><mi>o</mi><mi>n</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f[u][i]\gets f[son[u]][i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">s</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>），同时将短儿子的 DP 状态暴力合并。</p><p>有意思的是，由于继承的过程可以视为 DP 数组<strong>整体后移一位</strong>，所以可以利用指针 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 的实现这个过程。而每个长链只会被暴力合并一次，所以时间总复杂度是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 的。同时，每个叶子节点需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 的空间，每个非叶子节点由于继承了长儿子，只需要 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 的额外空间，所以空间总复杂度也是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 的。</p><p>为什么不能用重剖实现呢？重剖不同与长剖，无法保证重儿子的子树深度不小于轻儿子的子树深度。这会使得合并时没有对应的空间存储 DP 状态。</p><p>注意，由于长儿子的 DP 数组会被继承走，所以询问要挂在点上，不能在线。虽然短儿子的 DP 数组不会受到影响。</p><p>做到这里，我们已经把子树内的贡献解决了。然后发现子树外的不是很好做。如果定义 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">g[u][i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 为以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 为根的子树外，与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 距离为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 的点的个数，时空复杂度完全无法承受。我为此困惑了很久（<del>试图长剖换根 DP</del>）。回顾 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> 的过程，发现<strong>状态数由链长限制</strong>，这启发我们把 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">g[u][i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 限制到长链以内。即重新定义 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">g[u][i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 为 以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> <emp>所在长链的链顶</emp>为根的子树内，以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 为根的子树外，与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 距离为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 的点的个数。此时状态数被控制在了二倍链长以内（从长链的底端的叶子到另一个叶子，而另一个叶子的深度不大于长链的底端的叶子）。</p><p>明确了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> 之后，转移不难。如果自己是长儿子，就继承父亲。然后再暴力合并上短儿子的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span>。这里是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> 哦，看清！</p><p>注意，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> 是自下而上的，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> 是自上而下的，继承方向相反，注意实现（看注释）。</p><p>长链内的信息，我们可以用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f[u]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">[</mo><mi>u</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">g[u]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mclose">]</span></span></span></span> 保证。但可能有长链外的信息遗失。跳长链即可。这里不好讲解，看注释。</p><p>但时间复杂度也无奈的来到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>q</mi><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n+q\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.05028em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。<del>但是常数就是小啊，你来打我呀～</del></p><p>代码较短，不过细节较多。</p><details class="tag-plugin colorful folding" child="codeblock"><summary><span>code</span></summary><div class="body"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="type">int</span> to, ne;</span><br><span class="line">&#125; e[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> h[N];</span><br><span class="line"><span class="type">int</span> idx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    e[ ++ idx] = (E)&#123;y, h[x]&#125;;</span><br><span class="line">    h[x] = idx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; Q[N];</span><br><span class="line"><span class="type">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> hei[N];  <span class="comment">// 子树深度</span></span><br><span class="line"><span class="type">int</span> son[N];  <span class="comment">// 长儿子</span></span><br><span class="line"><span class="type">int</span> far[N];  <span class="comment">// 父亲</span></span><br><span class="line"><span class="type">int</span> top[N];  <span class="comment">// 链顶</span></span><br><span class="line"><span class="type">int</span> dfn[N];  <span class="comment">// 长剖后的 dfs 序</span></span><br><span class="line"><span class="type">int</span> dnt;</span><br><span class="line"><span class="type">int</span> fff[N];  <span class="comment">// f 的空间池</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> zero = <span class="number">0</span>;  <span class="comment">// 无奈之举</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> ! ! ! !   马蜂警告   ! ! ! !</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">对于一个数组 shuzu[]</span></span><br><span class="line"><span class="comment">一般下标为 i 的元素由 shuzu[i] 表达</span></span><br><span class="line"><span class="comment">如果你看到 i[shuzu] 的写法，请不要惊惶，这与上面等价</span></span><br><span class="line"><span class="comment">注释里我尽可能避免下面这个写法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> - - - -   一些规定   - - - -</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">注释里，</span></span><br><span class="line"><span class="comment">top直接表示长链链顶节点</span></span><br><span class="line"><span class="comment">btm直接表示长链链底节点</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">有 dfn[btm] = dfn[top] + hei[top] - 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一遍dfs 长剖</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> fa)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = h[u]; i; i = e[i].ne) &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == fa) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs1</span>(v, u);</span><br><span class="line">        <span class="keyword">if</span> (u[son][hei] &lt; v[hei]) &#123;</span><br><span class="line">            u[son] = v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    u[far] = fa;</span><br><span class="line">    u[hei] = u[son][hei] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">由于本人不喜指针，故利用 dfs 序实现O(1)继承</span></span><br><span class="line"><span class="comment">我们把 f[u][0] 放在 fff[dfn[u]] 处</span></span><br><span class="line"><span class="comment">这样 f[u][1] 从 f[son[u]]][0] 继承时，</span></span><br><span class="line"><span class="comment">fff[dfn[son[u]]] &lt;=&gt; fff[dfn[u]]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">一段长链的空间范围为 【 dfn[top] ， dfn[btm] 】</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> &amp;<span class="title">f</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (j &gt;= hei[i] || j &lt; <span class="number">0</span>) <span class="keyword">return</span> zero;  <span class="comment">//  询问里的 k 可能超过当前链长</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> fff[i[dfn] + j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二遍 dfs 求 f</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs2</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> tp)</span> </span>&#123;</span><br><span class="line">    u[top] = tp;</span><br><span class="line">    u[dfn] = ++ dnt;</span><br><span class="line">    <span class="keyword">if</span> (u[son]) &#123;</span><br><span class="line">        <span class="built_in">dfs2</span>(u[son], tp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = h[u]; i; i = e[i].ne) &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == u[far] || v == u[son]) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dfs2</span>(v, v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    注意，这里并没有合并短儿子</span></span><br><span class="line"><span class="comment">    f 仅包含长儿子内的信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : Q[u]) &#123;</span><br><span class="line">        <span class="type">int</span> x = u;</span><br><span class="line">        <span class="type">int</span> y = i.second;</span><br><span class="line">        <span class="keyword">while</span> (x &amp;&amp; y &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            ans[i.first] += <span class="built_in">f</span>(x, y);</span><br><span class="line">            <span class="comment">// 跳长链</span></span><br><span class="line">            y -= x[top][hei] - x[hei] + <span class="number">1</span>;</span><br><span class="line">            x = x[top][far];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 合并信息</span></span><br><span class="line">    <span class="built_in">f</span>(u, <span class="number">0</span>) = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = h[u]; i; i = e[i].ne) &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == u[far] || v == u[son]) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; v[hei]; ++ j) &#123;</span><br><span class="line">            <span class="built_in">f</span>(u, j + <span class="number">1</span>) += <span class="built_in">f</span>(v, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> ggg[N * <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">构造 g 的空间有点麻烦</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">先确认左极限 g[top][hei[top] - 1]</span></span><br><span class="line"><span class="comment">  确认右极限 g[btm][0]</span></span><br><span class="line"><span class="comment">  需要 2 * hei[top] - 1 的空间</span></span><br><span class="line"><span class="comment">  确认大致空间范围 【 2*(dfn[top]) ， 2*(dfn[btm]) 】</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">链长为 4，dfn[top] = 6 时，</span></span><br><span class="line"><span class="comment">dfn[btm] = 9;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">在空间池里状态：</span></span><br><span class="line"><span class="comment">下标  10  11  12  13  14  15  16  17  18  19  20 </span></span><br><span class="line"><span class="comment">     ——— ——— ——— ——— ——— ——— ——— ——— ——— ——— ——— </span></span><br><span class="line"><span class="comment">    |   |   | + | + | + | + | + | + | + |   |   |</span></span><br><span class="line"><span class="comment">     ——— ——— ——— ——— ——— ——— ——— ——— ——— ——— ——— </span></span><br><span class="line"><span class="comment">              ^           ^       ^   ^</span></span><br><span class="line"><span class="comment">              |     g[top][0]     |  g[btm][0]</span></span><br><span class="line"><span class="comment">    g[top][hei[top] - 1]     g[btm][1]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">于是可以构造 g[u][0] 为 ggg[dfn[btm]*2 - (hei[u] - 1)]</span></span><br><span class="line"><span class="comment">                    =&gt; ggg[dfn[btm] + dfn[u]]</span></span><br><span class="line"><span class="comment">            g[u][i] 为 ggg[dfn[btm] + dfn[u] - i]</span></span><br><span class="line"><span class="comment">                    =&gt; ggg[dfn[top] + hei[top] - 1 + dfn[u] - i]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> &amp;<span class="title">g</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i[top][hei] + i[top][hei] - i[hei] &lt;= j) <span class="keyword">return</span> zero;</span><br><span class="line">    <span class="keyword">return</span> ggg[i[dfn] + i[top][dfn] + i[top][hei] - j - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三遍 dfs 求 g</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs3</span><span class="params">(<span class="type">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    此时 g 为 u 子树以外的信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">g</span>(u, <span class="number">0</span>) = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = h[u]; i; i = e[i].ne) &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == u[far] || v == u[son]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; v[hei]; ++ j) &#123;</span><br><span class="line">            <span class="built_in">g</span>(u, j + <span class="number">1</span>) += <span class="built_in">f</span>(v, j);</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            因为短儿子的 DP 数组不会被继承</span></span><br><span class="line"><span class="comment">            所以 f(v, j) 是可用的</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    此时 g 为长儿子以外的信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : Q[u]) &#123;</span><br><span class="line">        <span class="comment">// 本长链内，长儿子外的信息</span></span><br><span class="line">        ans[i.first] += <span class="built_in">g</span>(u, i.second);</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> x = u[top];</span><br><span class="line">        <span class="type">int</span> y = i.second - x[hei] + u[hei];</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">1</span> &amp;&amp; y &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            注意这里脑抽的跳长链方式</span></span><br><span class="line"><span class="comment">            因为上一层里统计了这一层的信息（相当于走出长链又立刻走回来了</span></span><br><span class="line"><span class="comment">            所以我们要减去一个 f</span></span><br><span class="line"><span class="comment">            由于我们要同时访问两条链的信息，所以只能停在长链顶</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            ans[i.first] += <span class="built_in">g</span>(x[far], y - <span class="number">1</span>) - <span class="built_in">f</span>(x, y - <span class="number">2</span>);</span><br><span class="line">            x = x[far];</span><br><span class="line">            y -= x[top][hei] - x[hei] + <span class="number">1</span>;</span><br><span class="line">            x = x[top];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    此时 g 为长儿子以外的信息，它还要处理短儿子内的询问</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = h[u]; i; i = e[i].ne) &#123;</span><br><span class="line">        <span class="type">int</span> v = e[i].to;</span><br><span class="line">        <span class="keyword">if</span> (v == u[far] || v == u[son]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">dfs3</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    g[u] 使命结束，传给 g[son[u]]</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span> (u[son]) &#123;</span><br><span class="line">        <span class="built_in">dfs3</span>(u[son]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">INIT</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">WORK</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">rd</span>(n, m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++ i) &#123;</span><br><span class="line">        <span class="type">int</span> x, y;</span><br><span class="line">        <span class="built_in">rd</span>(x, y);</span><br><span class="line">        <span class="built_in">add</span>(x, y);</span><br><span class="line">        <span class="built_in">add</span>(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++ i) &#123;</span><br><span class="line">        <span class="type">int</span> x, k;</span><br><span class="line">        <span class="built_in">rd</span>(x, k);</span><br><span class="line">        Q[x].<span class="built_in">push_back</span>(&#123;i, k&#125;);</span><br><span class="line">        ans[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs1</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">dfs2</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">dfs3</span>(<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; ++ i) &#123;</span><br><span class="line">        <span class="built_in">wr</span>(ans[i], <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">        ans[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    idx = <span class="number">0</span>;</span><br><span class="line">    dnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++ i) &#123;</span><br><span class="line">        h[i] = <span class="number">0</span>;</span><br><span class="line">        hei[i] = <span class="number">0</span>;</span><br><span class="line">        son[i] = <span class="number">0</span>;</span><br><span class="line">        fff[i] = <span class="number">0</span>;</span><br><span class="line">        ggg[i * <span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">        ggg[i * <span class="number">2</span> + <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        Q[i].<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;省流：&lt;/strong&gt;&lt;/p&gt;
&lt;del&gt;长剖做法，全网首发，最优拿下，把某点分治吊杀。&lt;/del&gt; 
&lt;p&gt;实际上卡满的话没有点分治快。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;长链剖分属于树链剖分的一种。不过重儿子是&lt;strong&gt;子树深度&lt;/strong&gt;最大的</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="题解" scheme="http://sine-tea.com/categories/OI/%E9%A2%98%E8%A7%A3/"/>
    
    
    <category term="长剖" scheme="http://sine-tea.com/tags/%E9%95%BF%E5%89%96/"/>
    
  </entry>
  
  <entry>
    <title>鱼二·中秋特辑</title>
    <link href="http://sine-tea.com/article/ae45ca2a.html"/>
    <id>http://sine-tea.com/article/ae45ca2a.html</id>
    <published>2024-09-21T13:38:49.000Z</published>
    <updated>2025-03-10T08:04:37.561Z</updated>
    
    <content type="html"><![CDATA[<p>中秋放假，从八月十二的下午六点放到八月十四的早上八点。</p><p>十二日下午，一放学，一家人就开车到了 【someplace】。</p><p>环境一下就不一样了。是树，是山，看青翠的一片；是鸟，是虫，听空灵而悠远；是水，是风，在清凉的江畔。已入夜，不忍打开手电；浅望月，可惜尚未成园。</p><p>十三日早期钓鱼。再写“水清鱼若飞”的“《小石潭记》文”难免俗套。何不松口气，醉情这山水之美。</p><p>雨是踮着脚走来的，但水面上漾开的脚步暴露了它的行踪。雨急了，于是，雨急了，在天地间放肆自己的小情绪。这却是打搅了江水的梦，江水也哗的闹起来。竟分辨不开扑下的雨点和跃起的水花了。一时间，耳畔仅得水声，眼前尽是水汽。天地因水而交融、交溶，连我一起。不见对岸了。</p><p>小情绪发完了，起床气闹过了，天地重新明朗起来。恍然发现对岸山腰一圈玉带，是水在天上流吧。</p><p>午后，雨又吵醒了午睡的江……</p><p>没留神，今天的鱼钓得过多了呀，真是醉过，醉过。</p><div class="tag-plugin poetry"><div class="content"><div class="title">八月十三午后渔歌</div><div class="meta"><span>渊明</span></div><div class="body"><p>醒时仍彷徨，青山绿水旁。秋清风凉分外爽。渔歌早起悠扬。<br />中秋欠两日，天阴星辰稀。赏月未圆不是时。诗人已圆闲心。</p></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;中秋放假，从八月十二的下午六点放到八月十四的早上八点。&lt;/p&gt;
&lt;p&gt;十二日下午，一放学，一家人就开车到了 【someplace】。&lt;/p&gt;
&lt;p&gt;环境一下就不一样了。是树，是山，看青翠的一片；是鸟，是虫，听空灵而悠远；是水，是风，在清凉的江畔。已入夜，不忍打开手电；浅望月</summary>
      
    
    
    
    <category term="鲜花" scheme="http://sine-tea.com/categories/%E9%B2%9C%E8%8A%B1/"/>
    
    
    <category term="生活记录" scheme="http://sine-tea.com/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>字符串</title>
    <link href="http://sine-tea.com/article/fc81fbfd.html"/>
    <id>http://sine-tea.com/article/fc81fbfd.html</id>
    <published>2024-08-18T12:13:36.000Z</published>
    <updated>2025-03-10T08:04:37.557Z</updated>
    
    <content type="html"><![CDATA[<p>串串现状：</p><p>字符串题 = 鬼畜的字符串分析 + 毒瘤的ds维护</p><hr /><p>Lyndon 分解<br />Manacher 算法<br />回文自动机,PAM<br />有限状态自动机<br />后缀自动机,SAM<br />AC 自动机<br />KMP<br />后缀数组,SA<br />后缀树</p><p>黑  26<br />紫  65<br />蓝  23<br />绿  5<br />黄  1</p><hr /><p>提高<br />KMP</p><p>NOI<br />Manacher 算法<br />扩展 KMP 算法<br />有限状态自动机<br />AC 自动机<br />后缀自动机,SAM<br />后缀数组,SA<br />后缀树</p><p>回文自动机,PAM</p><hr /><hr /><p>二分答案</p><p>对原串先进行变换： 翻转、拼接、插入</p><p>相比于 “子串”，我们肯定更希望看到 “前缀” 或 “后缀”，因为前者有 O(n^2) 个，而后者只有 O(n) 个。</p><hr /><p>SA</p><p>字典序</p><p>二维数点</p><hr /><p>压位bitset</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;串串现状：&lt;/p&gt;
&lt;p&gt;字符串题 = 鬼畜的字符串分析 + 毒瘤的ds维护&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Lyndon 分解&lt;br /&gt;
Manacher 算法&lt;br /&gt;
回文自动机,PAM&lt;br /&gt;
有限状态自动机&lt;br /&gt;
后缀自动机,SAM&lt;br /&gt;
AC 自</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="专项总结" scheme="http://sine-tea.com/categories/OI/%E4%B8%93%E9%A1%B9%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>中山集训小结</title>
    <link href="http://sine-tea.com/article/f4e98d9.html"/>
    <id>http://sine-tea.com/article/f4e98d9.html</id>
    <published>2024-08-18T11:10:56.000Z</published>
    <updated>2025-03-10T08:04:37.555Z</updated>
    
    <content type="html"><![CDATA[<p>一句话概括：状态极差，仿佛就是去旅游的，应当被拖出去严肃批评教育。</p><p>暴露的问题包括但不限于：</p><ol><li>在模拟赛中出现了很多低级的错误。</li><li>抗影响能力不足：容易被别人说话影响心情，容易被别人玩游戏吸引然后一直伸着脖子看。</li><li>在讲自己了解的知识点时，没有认真听课复习回顾。</li><li>在讲自己不会的知识点时，没有认真推敲，听讲时基本没有笔记，笔记散烂。</li></ol><p>已有计划：</p><ol><li>关于低级错误，整理，在每次模拟考前看一遍，惩罚待定</li><li>在考试是不使用缺省源（害人不浅</li><li>继续写作题笔记，每周回顾一次笔记和A2题目</li><li>每两周抽空分析一个专项的作题方法技巧</li></ol><p>关于摸鱼：算上中山那两周，放假这么久玩够了。开学后在机房时间不多，哪里想得起摸鱼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;一句话概括：状态极差，仿佛就是去旅游的，应当被拖出去严肃批评教育。&lt;/p&gt;
&lt;p&gt;暴露的问题包括但不限于：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在模拟赛中出现了很多低级的错误。&lt;/li&gt;
&lt;li&gt;抗影响能力不足：容易被别人说话影响心情，容易被别人玩游戏吸引然后一直伸着脖子看。&lt;/li</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="游记" scheme="http://sine-tea.com/categories/OI/%E6%B8%B8%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>考前复习</title>
    <link href="http://sine-tea.com/article/bacf667.html"/>
    <id>http://sine-tea.com/article/bacf667.html</id>
    <published>2024-07-27T07:17:49.000Z</published>
    <updated>2025-03-10T08:04:37.558Z</updated>
    
    <content type="html"><![CDATA[<h1 id="考前复习"><a class="markdownIt-Anchor" href="#考前复习"></a> 考前复习</h1><h2 id="一-有关-vscode"><a class="markdownIt-Anchor" href="#一-有关-vscode"></a> 一 有关 VSCode</h2><h3 id="vscode-环境"><a class="markdownIt-Anchor" href="#vscode-环境"></a> VSCode 环境</h3><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="https://limit-bed.com/article/f5f849be" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">https://limit-bed.com/article/f5f849be</span><span class="cap link footnote">https://limit-bed.com/article/f5f849be</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h3 id="vscode-设置"><a class="markdownIt-Anchor" href="#vscode-设置"></a> VSCode 设置</h3><ul><li>Auto Save: afterDelay</li><li>font: Consolas</li><li>Word Wrap: on</li><li>Auto Closing * : never</li><li>Ignore Empty Lines: false</li><li>Insert Space: false</li><li>Mouse Wheel Zoom: true</li><li>Sticky Tab Stops: true</li><li>Trim Auto Whitespace: false</li><li>Accept Suggestion On Enter: off</li><li>Snippet Suggestions: top</li></ul><p><code>zoom</code>、<code>stops</code>、<code>trim</code>、<code>enter</code>。</p><h3 id="vscode-字体"><a class="markdownIt-Anchor" href="#vscode-字体"></a> VSCode 字体</h3><p>在 <code>C:\Windows\WinSxS\</code> 目录下搜索 <code>consola</code>。</p><p>丢到 <code>~\.fonts\</code> 目录下。</p><h2 id="二-有关-linux-命令"><a class="markdownIt-Anchor" href="#二-有关-linux-命令"></a> 二 有关 Linux 命令</h2><h3 id="第一部分"><a class="markdownIt-Anchor" href="#第一部分"></a> 第一部分</h3><ul><li>size</li><li>time</li></ul><h3 id="第二部分"><a class="markdownIt-Anchor" href="#第二部分"></a> 第二部分</h3><details class="tag-plugin colorful folding" ><summary><span></span></summary><div class="body"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"> 1. sudo                                        提权</span><br><span class="line"></span><br><span class="line"> 2. ll                                          列举目录下所有文件或目录的详细信息</span><br><span class="line"> 3. ls                                          列举目录下所有文件或目录的名称</span><br><span class="line">-l同 ll</span><br><span class="line">-a包括隐藏文件</span><br><span class="line"></span><br><span class="line"> 4. pwd                                         显示当前工作目录的路径</span><br><span class="line"> 5. cd</span><br><span class="line"></span><br><span class="line"> 6. mkdir                                       创建新目录</span><br><span class="line"> 7. rmdir                                       删除空目录</span><br><span class="line"> 8. touch                                       创建空文件或更新文件的时间戳</span><br><span class="line"></span><br><span class="line"> 9. rm                                          删除文件或目录</span><br><span class="line">10. cp                                          复制</span><br><span class="line">11. mv                                          移动或重命名</span><br><span class="line">-f强制</span><br><span class="line">-r递归</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">12. cat                                         连接和显示文件内容</span><br><span class="line">13. more less                                   逐页显示文本文件内容</span><br><span class="line">14. head tail -n &lt;n&gt; &lt;file_name&gt;                显示文件的前几行或后几</span><br><span class="line">-n行号</span><br><span class="line">-f实时</span><br><span class="line"></span><br><span class="line">15. grep                                        在文件中搜索指定文本</span><br><span class="line"></span><br><span class="line">16. find [路径] [匹配条件] [-exec 动作 &#123;&#125; \;]    在指定目录中搜索文件</span><br><span class="line">-empty</span><br><span class="line">-name &quot;&quot;文件名匹配方法</span><br><span class="line">-type [f|d|l]文件类型 【普通文件 目录 符号链接】</span><br><span class="line">-size [+-]size[cwbkMG]大小</span><br><span class="line">-[a|c|m][min|time] [+-]n【访问 状态 修改】【分钟 天】</span><br><span class="line"></span><br><span class="line">find -type f -name &quot;*.exe&quot; -exec rm &#123;&#125; \;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">16. ps                                          进程查询</span><br><span class="line">-e显示所有进程。</span><br><span class="line">-f全格式显示。</span><br><span class="line">-a显示终端上的所有进程，包括其他用户的进程。</span><br><span class="line">-u显示进程的详细状态。</span><br><span class="line">-x显示没有控制终端的进程。</span><br><span class="line">ps -ef | grep 进程关键字</span><br><span class="line">17. kill</span><br><span class="line"></span><br><span class="line">18. ifconfig</span><br><span class="line">19. ping</span><br><span class="line"></span><br><span class="line">20. wget                                        URL下载文件</span><br><span class="line">-O &lt;name&gt;后重命名</span><br><span class="line">-c 继续</span><br><span class="line">-b后台</span><br><span class="line">-i &lt;file&gt;从指定文件获取要下载的URL地址</span><br><span class="line"></span><br><span class="line">21. chmod                                       修改文件或目录的权限</span><br><span class="line">[ugo a]</span><br><span class="line">[-+=]</span><br><span class="line">[rwx 421]</span><br><span class="line">&lt;file&gt;</span><br><span class="line">chmod +x &lt;file&gt;</span><br></pre></td></tr></table></figure></div></details><h2 id="三-其他"><a class="markdownIt-Anchor" href="#三-其他"></a> 三 其他</h2><ol><li>进考场第一步要拆了输入法</li><li>背拍子</li><li></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;考前复习&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#考前复习&quot;&gt;&lt;/a&gt; 考前复习&lt;/h1&gt;
&lt;h2 id=&quot;一-有关-vscode&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一-有关-vscode&quot;</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    
  </entry>
  
  <entry>
    <title>任务清单</title>
    <link href="http://sine-tea.com/article/f2309c58.html"/>
    <id>http://sine-tea.com/article/f2309c58.html</id>
    <published>2024-07-27T07:10:49.000Z</published>
    <updated>2025-03-10T08:04:37.555Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一-总结各项知识点"><a class="markdownIt-Anchor" href="#一-总结各项知识点"></a> 一 总结各项知识点</h2><p>这里一步一步来，计划一周至少半项。</p><details class="tag-plugin colorful folding" ><summary><span>博弈论</span></summary><div class="body"><p>博弈论的题的核心在于双方都聪明且知道对方聪明</p><p>于是就有两个切入点</p><ol><li>我一定选使对方最优决策最劣的方案 （过程向</li><li>如果存在界，打破界会变劣的一方一定会维护界。<br />如果维护不了，就是必败界<br />如果一定能维护，就是平衡界 （结果向</li></ol><p>一般博弈论都是结论题，优先考虑第二点</p></div></details><h2 id="二-总结低级的错误"><a class="markdownIt-Anchor" href="#二-总结低级的错误"></a> 二 总结低级的错误</h2><ol><li>爆 <code>int</code>，爆模数，爆 <code>0x3f3f3f3f</code>。</li><li>当遇到一道可能有重边和自环的图时，要考虑 重自环。</li><li>要注意模数。</li><li>慎重读题。如果觉得题目难度不符，大概率读错题了。</li><li>要注意 STL 的常数。</li><li>复制同构代码时要反复检查大于小于和变量名</li><li>多测要清空，注意有没有提前结束的特判</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一-总结各项知识点&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#一-总结各项知识点&quot;&gt;&lt;/a&gt; 一 总结各项知识点&lt;/h2&gt;
&lt;p&gt;这里一步一步来，计划一周至少半项。&lt;/p&gt;
&lt;details class=&quot;tag-plugin co</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    
  </entry>
  
  <entry>
    <title>作题笔记</title>
    <link href="http://sine-tea.com/article/db4c6ac.html"/>
    <id>http://sine-tea.com/article/db4c6ac.html</id>
    <published>2024-07-21T23:58:00.000Z</published>
    <updated>2025-03-10T08:04:37.557Z</updated>
    
    <content type="html"><![CDATA[<h2 id="cf388c-fox-and-card-game"><a class="markdownIt-Anchor" href="#cf388c-fox-and-card-game"></a> CF388C Fox and Card Game</h2><blockquote><p>24-7-14-14</p></blockquote><p>博弈论的题的核心在于双方都聪明且知道对方聪明</p><p>于是就有两个切入点</p><ol><li>我一定选使对方最优决策最劣的方案 （过程向</li><li>如果存在界，打破界会变劣的一方一定会维护界。<br />如果维护不了，就是必败界<br />如果一定能维护，就是平衡界 （结果向</li></ol><p>思考这题时陷入了第一点，看题解后wssb。<br />明明做过的博弈题九成九是结论题，还在那儿想过程，无语了。</p><p>考虑过通过第一点写个暴力找规律，可能有用<br />考场遇到这种情况一定不能犹豫</p><h2 id="p2490-黑白棋"><a class="markdownIt-Anchor" href="#p2490-黑白棋"></a> P2490 黑白棋</h2><blockquote><p>24.7.14.15</p></blockquote><p>先考虑必败界，再dp一下就行</p><p>如果没理解错的话<br />有 k/2 堆棋子，每次可以在最多 d 堆中取走任意数量的棋子</p><p>记得 nim 好像有异或和为 0 的界？<br />还记得 d取 的问题有 d+1 的界？</p><p>这题不太能写暴力罢</p><p>仅有不超过 d 堆有多于0枚棋子时，直接秒<br />有且仅有 d+1的倍数 堆且都只剩1枚棋子，直接投<br />仅有不超过 d 堆有多于1枚棋子时，直接秒<br />有且仅有 d+1的倍数 堆且都只剩2枚棋子，直接投</p><p>应该是有 d+1 的界，难道依次判每个数是否在界上？</p><p>推不下去了</p><p>看题解<br />我真厉害，两个界糊一起就对了……所谓 k-nim</p><blockquote><p>首先将各堆石子数用二进制表示。<br />令 𝑟_𝑖 表示每堆石子二进制表示的第 𝑖 位上数字之和 mod(𝑘+1) 的值。<br />如果有任意一个 𝑟_𝑖≠0，先手必胜；否则先手必败。</p></blockquote><p>结论和证明都很好理解<br />思考时没分析第一个界，如果能想到二进制拆分，就能填补第二个界的漏洞</p><p>啊啊啊，dp部分自己想罢</p><p>堆数 m = k/2 &lt;= 50, 棋子数上限 n-k &lt;= 10000</p><p>总方案数 （n, k）</p><p>dp 是按二进制位考虑还是按堆数？</p><p>二进制位 棋子数？ log((n-k)/(d+1)) * (k/2/(d+1)) * (n-k)<br />令 n = n - k, m = k / 2, d = d - 1<br />O( nm(logn-logd) / d )</p><p>d=1时复杂度最大，就是 普通nim<br />从这个复杂度来看的确应该分析一下 普通nim</p><p>复杂度算错了，但应该能过</p><h2 id="p6902-surveillance"><a class="markdownIt-Anchor" href="#p6902-surveillance"></a> P6902 Surveillance</h2><blockquote><p>24.7.21.2</p></blockquote><p>看到倍增标签了，都没想出来……</p><p>个人思路是维护一个个区间对。但是这样信息难以标识和合并。</p><p>正解：把区间考虑成从左端点跳到右端点，倍增跳几次。</p><h2 id="cf710f-string-set-queries"><a class="markdownIt-Anchor" href="#cf710f-string-set-queries"></a> CF710F String Set Queries</h2><blockquote><p>24.7.21.3</p></blockquote><p>如果没有强制在线，那么就直接秒了。</p><p>在强制在在线的情况下，可以考虑根号重构。但不是很想写。</p><p>删除可以直接取关。可以实现动态插入 ACAM 吗？</p><p>罢了，还是根号重构</p><p>直接最优解？那些 nlogn 做法的在干嘛</p><h2 id="cf983e-nn-country"><a class="markdownIt-Anchor" href="#cf983e-nn-country"></a> CF983E NN country</h2><emp>每次暴力找最值的肯定不行，容易想到可以倍增优化。</emp><emp>图上不会就想树，树上不会就想链。</emp><h2 id="p6651-chain"><a class="markdownIt-Anchor" href="#p6651-chain"></a> P6651 Chain</h2><p>这次是被标签中的容斥给误导了……或者说我对容斥的认识比较偏激？</p><p>显然是可以 2^k 容斥，但时间复杂度显然是不对的。</p><p>这里应当依次单独考虑每个点主导的贡献。</p><p>这里，认为一个不合法链被其上第一个被ban掉的点主导。自然想到以拓扑序的顺序计数。</p><p>f 为前方案数，g 为后方案数， h 为中方案数，f` 为前主导方案数, 则有</p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><msub><mi mathvariant="normal">‘</mi><mi>u</mi></msub><mo>=</mo><msub><mi>f</mi><mi>u</mi></msub><mo>−</mo><mo>∑</mo><mrow><mi>f</mi><msub><mi mathvariant="normal">‘</mi><mi>v</mi></msub><mo>∗</mo><msub><mi>h</mi><mrow><mi>v</mi><mo separator="true">,</mo><mi>u</mi></mrow></msub></mrow><mspace linebreak="newline"></mspace><mi>a</mi><mi>n</mi><mi>s</mi><mo>=</mo><mo>∑</mo><mrow><mi>f</mi><msub><mi mathvariant="normal">‘</mi><mi>u</mi></msub><mo>∗</mo><msub><mi>g</mi><mi>u</mi></msub></mrow></mrow><annotation encoding="application/x-tex">f`_u = f_u - \sum{f`_v * h_{v,u}} \\ans = \sum{f`_u * g_u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="mop op-symbol large-op" style="position:relative;top:-0.000004999999999977245em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="mop op-symbol large-op" style="position:relative;top:-0.000004999999999977245em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord">‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">u</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>计数方法一共就那么几种，一定要挨个尝试一遍。</p><h2 id="cf1817c-similar-polynomials"><a class="markdownIt-Anchor" href="#cf1817c-similar-polynomials"></a> CF1817C Similar Polynomials</h2><p>tag:</p><ul><li>拉插</li></ul><p>今天终于是把拉格朗日插值学了……</p><p>拉插的思路还是很好懂的。</p><p>不对，这到题的思路不在拉插上？</p><p>以后推柿子是要留心一下有枚举范围缩小的极限情况</p><p>这题对拉插的理解考察很有意思</p><h2 id="p4139-上帝与集合的正确用法"><a class="markdownIt-Anchor" href="#p4139-上帝与集合的正确用法"></a> P4139 上帝与集合的正确用法</h2><p>推柿子<br />推不出来。考虑牛顿迭代</p><p>毛线哦，暴力打表找规律</p><p>好好好，又是奇怪定理，玩不起</p><p>扩展欧拉定理</p><h2 id="at_agc064_d-red-and-blue-chips"><a class="markdownIt-Anchor" href="#at_agc064_d-red-and-blue-chips"></a> AT_agc064_d Red and Blue Chips</h2><p>tag:</p><ul><li>计数</li></ul><blockquote><p>遇到此类求本质不同结果的题，先考虑如何 check 一个结果序列合法。<br />—  stntn</p><p>对排序后的数组计数是简单的。<br />—  FstAutoMaton</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;cf388c-fox-and-card-game&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#cf388c-fox-and-card-game&quot;&gt;&lt;/a&gt; CF388C Fox and Card Game&lt;/h2&gt;
&lt;blockquo</summary>
      
    
    
    
    <category term="OI" scheme="http://sine-tea.com/categories/OI/"/>
    
    <category term="作题" scheme="http://sine-tea.com/categories/OI/%E4%BD%9C%E9%A2%98/"/>
    
    
  </entry>
  
  <entry>
    <title>鱼一</title>
    <link href="http://sine-tea.com/article/95c5e483.html"/>
    <id>http://sine-tea.com/article/95c5e483.html</id>
    <published>2024-07-21T13:38:49.000Z</published>
    <updated>2025-03-10T08:04:37.561Z</updated>
    
    <content type="html"><![CDATA[<p>好久没去钓过鱼了，不是吗。</p><p>原计划上周，但上一周家父有事，遂另作了<a href="https://sine-tea.com/article/ae73c77e">安排</a>。</p><p>就不暴露我的宝贝钓位了。好久没钓过鱼，还有些忐忑，结果一下杆，鱼就来了。今天稳了，心想。</p><p>【 】（我也不知道该用什么拟声词）。</p><p>回过神，鱼线崩了。</p><p>主线崩了……</p><p>心想稳了的时候，只是扯了鱼竿，没弓起，导致力全硬加在线上……</p><p>好好好。</p><p>闻斯鱼食以梨，遂摘梨，切梨小许为饵，其余入腹。余大惊，曰：“呜呼噫嘻，安得好梨！清洌甘甜，山泉弗如也。”。又曰：“愿为鱼兮。”</p><p>然后鱼就更不客气了，前前后后崩了 6 条线，一条鱼没上……</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;好久没去钓过鱼了，不是吗。&lt;/p&gt;
&lt;p&gt;原计划上周，但上一周家父有事，遂另作了&lt;a href=&quot;https://sine-tea.com/article/ae73c77e&quot;&gt;安排&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;就不暴露我的宝贝钓位了。好久没钓过鱼，还有些忐忑，结果一下杆，鱼就来</summary>
      
    
    
    
    <category term="鲜花" scheme="http://sine-tea.com/categories/%E9%B2%9C%E8%8A%B1/"/>
    
    
    <category term="生活记录" scheme="http://sine-tea.com/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>雨与骑行</title>
    <link href="http://sine-tea.com/article/ae73c77e.html"/>
    <id>http://sine-tea.com/article/ae73c77e.html</id>
    <published>2024-07-14T14:14:00.000Z</published>
    <updated>2025-03-10T08:04:37.560Z</updated>
    
    <content type="html"><![CDATA[<p>你说的对，但是绵阳大雨一天。</p><p>还好，出发时雨不大，不然我妈定不会放我走。<s>但差点被我妈尾随</s>。</p><p>先是一段漫无目的的骑行。车也是修好后第一次骑，<s>俗话说， 久别胜新欢</s>，心情舒畅轻松。突然加速，来与风双向奔赴，让自己浸泡在风雨中，流淌在风雨中，溶解在风雨中。</p><p>突然冒出一个念头，不如去看看我待过的学校？走！</p><p>幼儿园离家较近，第一小学离家很近，第二小学离家更近。第一初中和第二小学在一个学校。我都只是到正门前，看一下，拍一张照，花费半小时不到。下一站——第二初中——就稍远了。</p><p>这时，雨忽然就大些。我到 【someplace】 想找个帽子，但没找到。没找到也好，完全不避这雨又何妨呢。于是就骑更加随性。于是下坡路不捏刹车。于是事后看骑行记录：最快速度 331(km/h)？</p><p><img src="https://bu.dusays.com/2024/07/14/6693cc47d2af7.jpg" alt="" /></p><p>一溜烟就到了涪江边。雨愈发猖狂。桥下，江河正涛滔；水上，汽雨共弥迷。隐隐间很有作诗一首，临江长啸的冲动。不过由于非机动车的道过窄，容不得停下恣意享受，便又加紧蹬车。实话说，这桥真的长，脚都给我蹬麻了，我也这才意识到自己已经湿透了。</p><p>到。雨已不可不避，但我避无可避。从小背包里拿出伞来，默默待在学校对面。自己肯定是在雨中脑袋进水后氧化生锈了，动作愈发缓慢，思绪也是。擦了擦眼镜片，徐徐吸气，徐徐吐息，心境在不大的城市空隙里扩散至远方，雨也落入心中，荡漾。<s>所以湿漉漉的伞该怎么收回包里。</s></p><p>过了很久，也有可能只是一小会儿，寻思着，是要去妹中了吧？不欲原路折返。不是因为想看看不同的风景，只是来的时候走的那座桥真**长。我记得有条短点的，然后路痴上线，遂求助于百度地图。怕是这等好天气的让度娘也犯了迷糊，她不时嘟囔着：“卫星信号弱” “已偏离路线，正在重新规划”。两个糊涂鬼在一塌糊涂的雨中迷迷糊糊的前进。</p><p>回家，脑洞一开地称了下自己+衣物+衣物携带的雨水的总体重，硬是多了10斤。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;你说的对，但是绵阳大雨一天。&lt;/p&gt;
&lt;p&gt;还好，出发时雨不大，不然我妈定不会放我走。&lt;s&gt;但差点被我妈尾随&lt;/s&gt;。&lt;/p&gt;
&lt;p&gt;先是一段漫无目的的骑行。车也是修好后第一次骑，&lt;s&gt;俗话说， 久别胜新欢&lt;/s&gt;，心情舒畅轻松。突然加速，来与风双向奔赴，让自己浸泡在风雨中</summary>
      
    
    
    
    <category term="鲜花" scheme="http://sine-tea.com/categories/%E9%B2%9C%E8%8A%B1/"/>
    
    
    <category term="生活记录" scheme="http://sine-tea.com/tags/%E7%94%9F%E6%B4%BB%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
</feed>
